<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContractGuard - AI Contract Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
        }
        .contract-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .contract-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .risk-high {
            border-left-color: #ef4444;
        }
        .risk-medium {
            border-left-color: #f59e0b;
        }
        .risk-low {
            border-left-color: #10b981;
        }
        .loading-bar {
            animation: loading 1.5s ease-in-out infinite;
        }
        @keyframes loading {
            0% { width: 0%; left: 0; }
            50% { width: 100%; left: 0; }
            100% { width: 0%; left: 100%; }
        }
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        .chatbot {
            width: 350px;
            height: 500px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        .chatbot.active {
            transform: translateY(0);
        }
        .chatbot-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-left: auto;
        }
        .chat-messages {
            height: 380px;
            overflow-y: auto;
        }
        .chat-input {
            border-top: 1px solid #e5e7eb;
        }
        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            margin-bottom: 10px;
        }
        .user-message {
            background-color: #3b82f6;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        .bot-message {
            background-color: #f3f4f6;
            color: #111827;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .floating-alert {
            position: fixed;
            bottom: 100px;
            right: 20px;
            z-index: 1000;
            animation: slideIn 0.5s forwards;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        .mobile-menu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .mobile-menu.active {
            max-height: 500px;
        }
        .typing-indicator {
            display: flex;
            padding: 10px 15px;
            background-color: #f3f4f6;
            border-radius: 18px;
            margin-right: auto;
            margin-bottom: 10px;
            width: fit-content;
        }
        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: #6b7280;
            border-radius: 50%;
            margin: 0 2px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }
        .document-part {
            cursor: pointer;
            color: #3b82f6;
            text-decoration: underline;
            margin: 5px 0;
            padding: 5px;
            border-radius: 4px;
            background-color: rgba(59, 130, 246, 0.1);
        }
        .document-part:hover {
            background-color: rgba(59, 130, 246, 0.2);
        }
        .document-highlight {
            background-color: #ffeb3b;
            padding: 2px;
            border-radius: 2px;
        }
        .quick-reply {
            display: inline-block;
            margin: 4px;
            padding: 6px 12px;
            background-color: #e0e7ff;
            border-radius: 16px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .quick-reply:hover {
            background-color: #3b82f6;
            color: white;
        }
        .upload-chat-btn {
            transition: all 0.2s ease;
        }
        .upload-chat-btn:hover {
            transform: translateX(3px);
        }
    </style>
</head>
<body class="font-sans bg-gray-50 min-h-screen">
    <!-- Header/Nav -->
    <header class="gradient-bg text-white shadow-md">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <i class="fas fa-file-contract text-2xl mr-2"></i>
                    <h1 class="text-xl font-bold">ContractGuard</h1>
                </div>
                <nav class="hidden md:flex space-x-6">
                </nav>
                <div class="flex items-center space-x-4">
                    <button class="bg-white text-blue-600 px-4 py-2 rounded-md font-medium hover:bg-blue-50 transition">
                        Sign In
                    </button>
                    <button class="md:hidden text-white text-xl" id="mobile-menu-button">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
            <!-- Mobile Menu -->
            <div class="mobile-menu md:hidden bg-blue-800 rounded-md" id="mobile-menu">
                <div class="flex flex-col space-y-2 p-4">
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-16">
        <div class="container mx-auto px-4 flex flex-col md:flex-row items-center">
            <div class="md:w-1/2 mb-8 md:mb-0">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">AI-Powered Contract Analysis</h1>
                <p class="text-xl mb-6">Identify risks, understand clauses, and get actionable insights in seconds with our advanced AI technology.</p>
                <div class="flex">
                    <button class="bg-white text-blue-600 px-6 py-3 rounded-md font-medium hover:bg-blue-50 transition">
                        Analyze Your Contract
                    </button>
                </div>
            </div>
            <div class="md:w-1/2 flex justify-center">
                <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-md">
                    <div class="text-gray-800 mb-4">
                        <h3 class="text-xl font-bold mb-2">Upload Your Contract</h3>
                        <p class="text-gray-600">Supported formats: PDF, DOCX, TXT</p>
                    </div>
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition" id="upload-area">
                        <i class="fas fa-cloud-upload-alt text-4xl text-blue-500 mb-2"></i>
                        <p class="text-gray-600">Drag & drop your file here or click to browse</p>
                        <input type="file" class="hidden" id="contract-upload">
                    </div>
                    <div class="mt-4 text-sm text-gray-500">
                        <p>By uploading, you agree to our <a href="#" class="text-blue-500 hover:underline">Terms of Service</a></p>
                    </div>
                    <button class="mt-4 flex items-center text-blue-600 hover:text-blue-800 text-sm upload-chat-btn" onclick="document.getElementById('chatbot-toggle').click()">
                        <i class="fas fa-comment-dots mr-2"></i> Ask about your contract
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">Key Features</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-gray-50 p-6 rounded-lg shadow-sm hover:shadow-md transition">
                    <div class="text-blue-500 text-3xl mb-4">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Risk Detection</h3>
                    <p class="text-gray-600">Our AI identifies potential risks and unfavorable clauses in your contracts.</p>
                </div>
                <div class="bg-gray-50 p-6 rounded-lg shadow-sm hover:shadow-md transition">
                    <div class="text-blue-500 text-3xl mb-4">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Smart Suggestions</h3>
                    <p class="text-gray-600">Get recommendations for contract improvements based on industry standards.</p>
                </div>
                <div class="bg-gray-50 p-6 rounded-lg shadow-sm hover:shadow-md transition">
                    <div class="text-blue-500 text-3xl mb-4">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Performance Tracking</h3>
                    <p class="text-gray-600">Monitor how your contracts perform over time with detailed analytics.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Recent Contracts Section -->
    <section class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Recent Contracts</h2>
                <button class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">
                    <i class="fas fa-plus mr-2"></i> New Analysis
                </button>
            </div>
                        
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Contract Card 1 -->
                <div class="contract-card risk-high bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="font-bold text-lg">Employment Agreement</h3>
                            <p class="text-gray-500 text-sm">Analyzed 2 days ago</p>
                        </div>
                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium">High Risk</span>
                    </div>
                    <p class="text-gray-600 mb-4">Identified 3 high-risk clauses including non-compete and termination terms.</p>
                    <div class="flex justify-between items-center">
                        <div class="flex space-x-2">
                            <span class="bg-gray-100 px-2 py-1 rounded-full text-xs">Employment</span>
                            <span class="bg-gray-100 px-2 py-1 rounded-full text-xs">Legal</span>
                        </div>
                        <button class="text-blue-600 hover:text-blue-800">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                                
                <!-- Contract Card 2 -->
                <div class="contract-card risk-medium bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="font-bold text-lg">NDA with TechCorp</h3>
                            <p class="text-gray-500 text-sm">Analyzed 1 week ago</p>
                        </div>
                        <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium">Medium Risk</span>
                    </div>
                    <p class="text-gray-600 mb-4">2 clauses need attention regarding confidentiality duration and scope.</p>
                    <div class="flex justify-between items-center">
                        <div class="flex space-x-2">
                            <span class="bg-gray-100 px-2 py-1 rounded-full text-xs">NDA</span>
                            <span class="bg-gray-100 px-2 py-1 rounded-full text-xs">Business</span>
                        </div>
                        <button class="text-blue-600 hover:text-blue-800">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                                
                <!-- Contract Card 3 -->
                <div class="contract-card risk-low bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="font-bold text-lg">Service Agreement</h3>
                            <p class="text-gray-500 text-sm">Analyzed 2 weeks ago</p>
                        </div>
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium">Low Risk</span>
                    </div>
                    <p class="text-gray-600 mb-4">Standard terms with no significant issues detected.</p>
                    <div class="flex justify-between items-center">
                        <div class="flex space-x-2">
                            <span class="bg-gray-100 px-2 py-1 rounded-full text-xs">Service</span>
                            <span class="bg-gray-100 px-2 py-1 rounded-full text-xs">Agreement</span>
                        </div>
                        <button class="text-blue-600 hover:text-blue-800">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Chatbot -->
    <div class="chatbot-container">
        <div class="chatbot bg-white hidden" id="chatbot">
            <div class="bg-blue-600 text-white p-4 flex items-center">
                <div class="flex items-center">
                    <div class="bg-white text-blue-600 rounded-full w-8 h-8 flex items-center justify-center mr-2">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3 class="font-bold">ContractGuard AI Assistant</h3>
                </div>
                <button class="ml-auto text-white hover:text-blue-200" id="close-chatbot">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chat-messages p-4" id="chat-messages">
                <div class="bot-message message">
                    Hello! I'm your ContractGuard AI Assistant. How can I help you with your contracts today?
                </div>
                <div class="bot-message message">
                    Here are some things I can help with:
                    <ul class="list-disc pl-5 mt-2">
                        <li>Explain contract clauses</li>
                        <li>Identify potential risks</li>
                        <li>Suggest improvements</li>
                        <li>Answer legal questions</li>
                    </ul>
                    <div class="mt-3">
                        <p class="font-medium mb-2">Quick actions:</p>
                        <div class="flex flex-wrap">
                            <span class="quick-reply" onclick="sendQuickReply('Upload a contract')">Upload a contract</span>
                            <span class="quick-reply" onclick="sendQuickReply('Explain termination clause')">Explain termination clause</span>
                            <span class="quick-reply" onclick="sendQuickReply('What is an NDA?')">What is an NDA?</span>
                            <span class="quick-reply" onclick="sendQuickReply('Review a contract')">Review a contract</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="chat-input p-4 bg-gray-50">
                <div class="flex">
                    <input type="text" placeholder="Type your message..." class="flex-grow px-4 py-2 rounded-l-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="chat-input">
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-r-md hover:bg-blue-700 transition" id="send-message">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="mt-2 text-xs text-gray-500">
                    <p>Upload contracts to analyze specific clauses</p>
                </div>
            </div>
        </div>
        <button class="chatbot-toggle bg-blue-600 text-white shadow-lg pulse hover:bg-blue-700 transition" id="chatbot-toggle">
            <i class="fas fa-comment-dots text-xl"></i>
        </button>
    </div>

    <!-- Document Preview Modal -->
    <div class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden" id="document-modal">
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden">
            <div class="flex justify-between items-center bg-blue-600 text-white p-4">
                <h3 class="font-bold">Document Preview</h3>
                <button class="text-white hover:text-blue-200" id="close-document-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-6 overflow-y-auto max-h-[80vh]" id="document-preview">
                <!-- Document content will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Sample document data
        const sampleDocuments = {
            'employment_agreement': {
                title: 'Employment Agreement',
                content: `
                    <h4 class="font-bold mb-2">EMPLOYMENT AGREEMENT</h4>
                    <p class="mb-4">This Employment Agreement ("Agreement") is made and entered into as of [Date], by and between [Company Name], a [State] corporation ("Company"), and [Employee Name] ("Employee").</p>
                    
                    <h5 class="font-bold mt-4 mb-2 document-section" data-section="position">1. POSITION</h5>
                    <p class="mb-4">Employee shall serve as [Job Title] and shall perform such duties as are customary for such position and as may be assigned by the Company.</p>
                    
                    <h5 class="font-bold mt-4 mb-2 document-section" data-section="compensation">2. COMPENSATION</h5>
                    <p class="mb-4">Employee shall receive a base salary of $[Amount] per year, payable in accordance with the Company's standard payroll practices.</p>
                    
                    <h5 class="font-bold mt-4 mb-2 document-section" data-section="termination">3. TERMINATION</h5>
                    <p class="mb-4">This Agreement may be terminated by either party upon [Number] days' written notice. The Company may terminate Employee immediately for cause, including but not limited to misconduct or poor performance.</p>
                    
                    <h5 class="font-bold mt-4 mb-2 document-section" data-section="non-compete">4. NON-COMPETE</h5>
                    <p class="mb-4">Employee agrees not to engage in any business activity that competes with the Company during the term of employment and for [Number] months thereafter within a [Number]-mile radius of any Company location.</p>
                    
                    <h5 class="font-bold mt-4 mb-2 document-section" data-section="confidentiality">5. CONFIDENTIALITY</h5>
                    <p class="mb-4">Employee shall not disclose any confidential information of the Company to any third party during or after employment.</p>
                `,
                analysis: {
                    'position': 'Standard position description clause. No significant risks identified.',
                    'compensation': 'Standard compensation terms. Verify that the amount matches your negotiation.',
                    'termination': 'Potential risk: The termination clause allows immediate termination for "poor performance" without clear definition. Consider requesting more specific language.',
                    'non-compete': 'High risk: The non-compete clause is very broad in scope (time and geography). This may be unenforceable in some jurisdictions or overly restrictive.',
                    'confidentiality': 'Standard confidentiality clause. Ensure it aligns with your industry standards.'
                }
            },
            'nda': {
                title: 'Non-Disclosure Agreement',
                content: `
                    <h4 class="font-bold mb-2">NON-DISCLOSURE AGREEMENT</h4>
                    <p class="mb-4">This Non-Disclosure Agreement ("Agreement") is made and entered into as of [Date] by and between [Disclosing Party] ("Disclosing Party") and [Receiving Party] ("Receiving Party").</p>
                    
                    <h5 class="font-bold mt-4 mb-2 document-section" data-section="definition">1. DEFINITION OF CONFIDENTIAL INFORMATION</h5>
                    <p class="mb-4">Confidential Information shall include all non-public information disclosed by Disclosing Party to Receiving Party, whether in writing, orally, or by other means.</p>
                    
                    <h5 class="font-bold mt-4 mb-2 document-section" data-section="obligations">2. OBLIGATIONS OF RECEIVING PARTY</h5>
                    <p class="mb-4">Receiving Party shall maintain Confidential Information in strict confidence and shall not disclose such information to any third party without prior written consent.</p>
                    
                    <h5 class="font-bold mt-4 mb-2 document-section" data-section="duration">3. DURATION</h5>
                    <p class="mb-4">The obligations of confidentiality shall remain in effect for [Number] years from the date of disclosure.</p>
                    
                    <h5 class="font-bold mt-4 mb-2 document-section" data-section="exclusions">4. EXCLUSIONS</h5>
                    <p class="mb-4">The obligations of confidentiality shall not apply to information that: (a) is or becomes publicly available; (b) was in Receiving Party's possession prior to disclosure; (c) is independently developed by Receiving Party.</p>
                    
                    <h5 class="font-bold mt-4 mb-2 document-section" data-section="remedies">5. REMEDIES</h5>
                    <p class="mb-4">Disclosing Party shall be entitled to seek injunctive relief in addition to any other remedies available at law or in equity.</p>
                `,
                analysis: {
                    'definition': 'Standard definition of confidential information. Ensure it covers all types of information you need protected.',
                    'obligations': 'Standard confidentiality obligations. No significant issues.',
                    'duration': 'Medium risk: The duration of [Number] years may be too long or too short depending on your industry. Typical durations are 2-5 years.',
                    'exclusions': 'Standard exclusions. Ensure they cover all appropriate scenarios.',
                    'remedies': 'Standard remedies clause. No significant issues.'
                }
            }
        };

        // Current document being analyzed
        let currentDocument = null;
        let currentDocumentType = null;

        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('active');
        });

        // Chatbot functionality
        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbot = document.getElementById('chatbot');
        const closeChatbot = document.getElementById('close-chatbot');
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendMessage = document.getElementById('send-message');
        const uploadArea = document.getElementById('upload-area');
        const contractUpload = document.getElementById('contract-upload');
        const documentModal = document.getElementById('document-modal');
        const documentPreview = document.getElementById('document-preview');
        const closeDocumentModal = document.getElementById('close-document-modal');

        // Toggle chatbot visibility
        chatbotToggle.addEventListener('click', () => {
            chatbot.classList.toggle('hidden');
            chatbot.classList.toggle('active');
        });

        // Close chatbot
        closeChatbot.addEventListener('click', () => {
            chatbot.classList.add('hidden');
            chatbot.classList.remove('active');
        });

        // Close document modal
        closeDocumentModal.addEventListener('click', () => {
            documentModal.classList.add('hidden');
        });

        // Upload area click handler
        uploadArea.addEventListener('click', () => {
            contractUpload.click();
        });

        // File upload handler
        contractUpload.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                // In a real app, you would upload the file to your server
                // For this demo, we'll use a sample document
                analyzeDocument('employment_agreement');
            }
        });

        // Function to analyze a document
        function analyzeDocument(docType) {
            currentDocument = sampleDocuments[docType];
            currentDocumentType = docType;
            
            // Add message about document being analyzed
            const botMessage = document.createElement('div');
            botMessage.className = 'message bot-message';
            botMessage.innerHTML = `
                I've analyzed the <strong>${currentDocument.title}</strong>. Here are the main sections:
                ${Object.keys(currentDocument.analysis).map(section => 
                    `<div class="document-part" data-section="${section}">${section.replace(/_/g, ' ').toUpperCase()}</div>`
                ).join('')}
                <p class="mt-2">Click on any section to get my analysis.</p>
            `;
            chatMessages.appendChild(botMessage);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Show document preview
            documentPreview.innerHTML = currentDocument.content;
            documentModal.classList.remove('hidden');
            
            // Add click handlers to document sections
            document.querySelectorAll('.document-section').forEach(section => {
                section.addEventListener('click', () => {
                    const sectionId = section.getAttribute('data-section');
                    showSectionAnalysis(sectionId);
                });
            });
            
            // Add click handlers to document parts in chat
            document.querySelectorAll('.document-part').forEach(part => {
                part.addEventListener('click', () => {
                    const sectionId = part.getAttribute('data-section');
                    showSectionAnalysis(sectionId);
                    
                    // Highlight the section in the document preview
                    highlightSection(sectionId);
                });
            });
        }

        // Function to show analysis for a specific section
        function showSectionAnalysis(sectionId) {
            const sectionName = sectionId.replace(/_/g, ' ').toUpperCase();
            const analysis = currentDocument.analysis[sectionId];
            
            // Add bot message with analysis
            const botMessage = document.createElement('div');
            botMessage.className = 'message bot-message';
            botMessage.innerHTML = `
                <strong>${sectionName}</strong> Analysis:
                <p class="mt-2">${analysis}</p>
                ${analysis.includes('risk') ? 
                    '<div class="mt-3 p-2 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700">' +
                    '<p>This section may need attention. Would you like me to suggest alternative language?</p>' +
                    '<div class="flex mt-2">' +
                    '<button class="mr-2 px-3 py-1 bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200" onclick="suggestAlternativeLanguage(\'' + sectionId + '\')">Yes, suggest changes</button>' +
                    '<button class="px-3 py-1 bg-gray-100 text-gray-800 rounded hover:bg-gray-200" onclick="dismissSuggestion()">No, thanks</button>' +
                    '</div>' +
                    '</div>' : ''}
            `;
            chatMessages.appendChild(botMessage);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Function to highlight a section in the document preview
        function highlightSection(sectionId) {
            // Remove any existing highlights
            document.querySelectorAll('.document-section').forEach(section => {
                section.classList.remove('document-highlight');
            });
            
            // Add highlight to the selected section
            const section = document.querySelector(`.document-section[data-section="${sectionId}"]`);
            if (section) {
                section.classList.add('document-highlight');
                section.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Function to suggest alternative language
        function suggestAlternativeLanguage(sectionId) {
            const sectionName = sectionId.replace(/_/g, ' ').toUpperCase();
            let suggestion = '';
            
            if (sectionId === 'non-compete') {
                suggestion = 'Consider limiting the non-compete to [Number] months and only for direct competitors in your specific industry. Geographic restrictions should be reasonable based on your actual business operations.';
            } else if (sectionId === 'termination') {
                suggestion = 'Suggest defining "poor performance" with measurable criteria (e.g., failure to meet 3 consecutive quarterly goals) and implementing a performance improvement plan before termination.';
            } else {
                suggestion = 'I recommend consulting with a legal professional to draft language that better suits your specific needs while remaining enforceable.';
            }
            
            // Add bot message with suggestion
            const botMessage = document.createElement('div');
            botMessage.className = 'message bot-message';
            botMessage.innerHTML = `
                <strong>Suggested Improvement for ${sectionName}:</strong>
                <p class="mt-2">${suggestion}</p>
                <div class="mt-3 p-2 bg-blue-50 border-l-4 border-blue-400 text-blue-700">
                    <p>Would you like me to generate a revised version of this clause?</p>
                    <div class="flex mt-2">
                        <button class="mr-2 px-3 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200" onclick="generateRevisedClause('${sectionId}')">Yes, generate revision</button>
                        <button class="px-3 py-1 bg-gray-100 text-gray-800 rounded hover:bg-gray-200" onclick="dismissSuggestion()">No, thanks</button>
                    </div>
                </div>
            `;
            chatMessages.appendChild(botMessage);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Function to generate a revised clause
        function generateRevisedClause(sectionId) {
            const sectionName = sectionId.replace(/_/g, ' ').toUpperCase();
            let revisedClause = '';
            
            if (sectionId === 'non-compete') {
                revisedClause = `
                    <p><strong>4. NON-COMPETE</strong></p>
                    <p>Employee agrees not to engage in any business activity that directly competes with the Company's core business during the term of employment and for 6 months thereafter within a 25-mile radius of any Company location where Employee worked for at least 6 months.</p>
                `;
            } else if (sectionId === 'termination') {
                revisedClause = `
                    <p><strong>3. TERMINATION</strong></p>
                    <p>This Agreement may be terminated by either party upon 30 days' written notice. The Company may terminate Employee immediately for cause, defined as: (a) willful misconduct; (b) material breach of this Agreement; (c) conviction of a felony; or (d) after 3 consecutive months of documented poor performance following implementation of a performance improvement plan.</p>
                `;
            } else {
                revisedClause = `
                    <p><strong>${sectionName}</strong></p>
                    <p>[Revised clause would appear here based on your specific requirements]</p>
                `;
            }
            
            // Add bot message with revised clause
            const botMessage = document.createElement('div');
            botMessage.className = 'message bot-message';
            botMessage.innerHTML = `
                <strong>Revised ${sectionName} Clause:</strong>
                <div class="mt-2 p-3 bg-gray-100 rounded">${revisedClause}</div>
                <div class="mt-3 p-2 bg-green-50 border-l-4 border-green-400 text-green-700">
                    <p>You can copy this language and propose it for your contract negotiations.</p>
                </div>
            `;
            chatMessages.appendChild(botMessage);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Function to dismiss suggestion
        function dismissSuggestion() {
            // Just scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Function to send quick reply
        function sendQuickReply(text) {
            chatInput.value = text;
            sendUserMessage();
        }

        // Send message function
        function sendUserMessage() {
            const message = chatInput.value.trim();
            if (message === '') return;
            
            // Add user message to chat
            const userMessage = document.createElement('div');
            userMessage.className = 'message user-message';
            userMessage.textContent = message;
            chatMessages.appendChild(userMessage);
            
            // Clear input
            chatInput.value = '';
            
            // Show typing indicator
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'typing-indicator';
            typingIndicator.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatMessages.appendChild(typingIndicator);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate bot response after delay
            setTimeout(() => {
                // Remove typing indicator
                chatMessages.removeChild(typingIndicator);
                
                // Add bot response
                const botResponse = getBotResponse(message);
                const botMessage = document.createElement('div');
                botMessage.className = 'message bot-message';
                botMessage.innerHTML = botResponse;
                chatMessages.appendChild(botMessage);
                
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 1500);
        }

        // Send message on button click
        sendMessage.addEventListener('click', sendUserMessage);
        
        // Send message on Enter key
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendUserMessage();
            }
        });

        // Enhanced bot responses with document analysis
        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('upload') || lowerMessage.includes('analyze') || lowerMessage.includes('review')) {
                return `Please upload your contract document using the upload button above. For now, I can analyze a sample document for you: 
                    <div class="mt-3">
                        <button class="px-4 py-2 bg-blue-100 text-blue-800 rounded hover:bg-blue-200 mr-2" onclick="analyzeDocument('employment_agreement')">Analyze Employment Agreement</button>
                        <button class="px-4 py-2 bg-blue-100 text-blue-800 rounded hover:bg-blue-200" onclick="analyzeDocument('nda')">Analyze NDA</button>
                    </div>`;
            } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                return "Hello! I'm your ContractGuard AI Assistant. How can I help you with your contracts today?";
            } else if (lowerMessage.includes('risk') || lowerMessage.includes('danger')) {
                return "I can help identify risks in your contracts. Common risk areas include termination clauses, non-compete agreements, and liability limitations. Would you like me to analyze a specific document?";
            } else if (lowerMessage.includes('nda') || lowerMessage.includes('non-disclosure')) {
                return "NDAs typically contain confidentiality clauses, duration terms, and scope definitions. Key things to check: <ul class='list-disc pl-5 mt-2'><li>Is the duration reasonable (2-5 years is typical)?</li><li>Is the definition of confidential information sufficiently broad?</li><li>Are there appropriate exclusions?</li></ul> Would you like me to analyze an NDA for you?";
            } else if (lowerMessage.includes('termination') || lowerMessage.includes('end')) {
                return "Termination clauses specify how and when a contract can be ended. They often include notice periods and conditions. Watch for: <ul class='list-disc pl-5 mt-2'><li>Unreasonably short notice periods</li><li>Vague definitions of 'cause' for termination</li><li>One-sided termination rights</li></ul> Would you like to review a specific termination clause?";
            } else if (lowerMessage.includes('non-compete') || lowerMessage.includes('competition')) {
                return "Non-compete clauses restrict your ability to work with competitors after leaving a company. Key considerations: <ul class='list-disc pl-5 mt-2'><li>Duration (6-12 months is typical)</li><li>Geographic scope (should be reasonable)</li><li>Scope of restricted activities (should be narrowly defined)</li></ul> These clauses are often heavily negotiated and may be unenforceable if too broad.";
            } else if (lowerMessage.includes('thank') || lowerMessage.includes('thanks')) {
                return "You're welcome! Let me know if you have any other questions about your contracts.";
            } else if (lowerMessage.includes('help') || lowerMessage.includes('support')) {
                return "I can help with: <ul class='list-disc pl-5 mt-2'><li>Contract analysis and risk assessment</li><li>Clause explanations</li><li>Suggested improvements</li><li>Legal term definitions</li></ul> What specific assistance do you need?";
            } else if (lowerMessage.includes('confidential') || lowerMessage.includes('secret')) {
                return "Confidentiality clauses protect sensitive information. Important aspects: <ul class='list-disc pl-5 mt-2'><li>Clear definition of what's considered confidential</li><li>Obligations of the receiving party</li><li>Duration of confidentiality obligations</li><li>Permitted disclosures (e.g., to attorneys, by court order)</li></ul> Would you like me to review a specific confidentiality clause?";
            } else if (lowerMessage.includes('liability') || lowerMessage.includes('damage')) {
                return "Liability clauses define responsibility for damages. Watch for: <ul class='list-disc pl-5 mt-2'><li>Limitations on liability amounts</li><li>Exclusions of consequential damages</li><li>One-sided liability provisions</li></ul> These clauses can significantly impact your legal rights.";
            } else {
                return "I'm an AI trained to help with contract analysis. Could you provide more details about your question or upload the contract you'd like me to review? Here are some things I can help with: <ul class='list-disc pl-5 mt-2'><li>Explain specific contract clauses</li><li>Identify potential risks in your contracts</li><li>Suggest improvements to contract language</li><li>Answer questions about common contract terms</li></ul>";
            }
        }

        // Make functions available globally
        window.sendQuickReply = sendQuickReply;
        window.analyzeDocument = analyzeDocument;
        window.suggestAlternativeLanguage = suggestAlternativeLanguage;
        window.generateRevisedClause = generateRevisedClause;
        window.dismissSuggestion = dismissSuggestion;
    </script>

</body>
</html>
